<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmutOur Admin-Dashboard</title>
    <link rel="stylesheet" href="assets/css/admindashboard.css">
    <script src="assets/js/forminputbooking.js"></script>
</head>

<body>
    <div class="header">
        <div class="container-navbar">
            <div class="navbar">
                <div class="logo">
                    <a href="index.html"><img src="assets/images/logo.png" alt="logo" width="125px"></a>
                </div>
                <nav>
                    <ul id="MenuItems">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="">About</a></li>
                        <li><a href="">Contact</a></li>
                        <li><a href="account.html">Account</a></li>
                    </ul>
                </nav>
                <a href="cart.html"><img src="assets/images/cart.png" width="30px" height="30px"></a>
                <img src="assets/images/menu.png" class="menu-icon" onclick="menutoggle()">
            </div>
        </div>    
    </div>
    <!-- Feadtued Categories -->

    <div class="boxhero">
        <div class="box">
          <div class="square">
            <div class="square-icon1">
              <div class="icon">
                <img src="assets/images/icon/booking (1).png" alt="">
              </div>
            </div>
            <p class="info">Jumlah Booking</p>
            <p class="count" id="count_booked">
              <script>
                const counted_booking = document.getElementById("count_booked");
                let count_booking = 0;
  
                fetch("http://localhost:8000/booked")
                  .then((response) => response.json())
                  .then((data_booked) => {
                    // Map the data from the response rows
                    const bookedElements = data_booked.data.map((booked) => {
                      count_booking++;
                    });
                    counted_booking.innerHTML = count_booking;
                  });
              </script>
            </p>
          </div>
        </div>
        <div class="box">
          <div class="square">
            <div class="square-icon2">
              <div class="icon">
                <img src="assets/images/icon/festival.png" alt="">
              </div>
            </div>
            <p class="info">Jumlah Festival</p>
            <p class="count" id="counted_festival">
              <script>
                const counted_fest = document.getElementById("counted_festival");
                let count_fest = 0;
  
                fetch("http://localhost:8000/festival")
                  .then((response) => response.json())
                  .then((data_festival) => {
                    // Map the data from the response rows
                    const Elements = data_festival.rows.map((festival) => {
                      count_fest++;
                    });
                    counted_fest.innerHTML = count_fest;
                  });
              </script>
            </p>
          </div>
        </div>
        <div class="box">
          <div class="square">
            <div class="square-icon3">
              <div class="icon">
                <img src="assets/images/icon/exhibition.png" alt="">
              </div>
            </div>
            <p class="info">Jumlah Pameran</p>
            <p class="count" id="counted_pameran">
              <script>
                const counted_pameran =
                  document.getElementById("counted_pameran");
                let count_pameran = 0;
  
                fetch("http://localhost:8000/pameran")
                  .then((response) => response.json())
                  .then((data_pameran) => {
                    // Map the data from the response rows
                    const Elements = data_pameran.data.map((pameran) => {
                      count_pameran++;
                    });
                    counted_pameran.innerHTML = count_pameran;
                  });
              </script>
            </p>
          </div>
        </div>
      </div>

      <!-- table booking -->
      <div class="container-booking">
        <table>
            <div class="title-list">List of Booking</div>
            <div class="button-input">
              <button class="custom-btn button-22" onclick="openPopupForm('add-booking')">Tambah Booking</button>
              <div id="popup-form-add-booking" class="popup-form">
                <div class="wrapper fadeInDown">
                  
                  <div id="formContent">
                    <!-- Icon -->
                    <div class="fadeIn first">
                      <img
                        src="./assets/images/logo/logowordmark.png"
                        id="icon"
                        alt="User Icon"
                        class="img-size"
                      />
                    </div>
                    <span class="close" onclick="closePopupForm('add-booking')">&times;</span>
                    <!-- Tabs Titles -->
                    <h5>Tambah Data Booking</h5>
                    <!-- Login Form -->
                    <form>
                      <input
                        type="text"
                        id="nama"
                        class="fadeIn second"
                        name="nama"
                        placeholder="Nama"
                      />
                      <input
                        type="text"
                        id="nohp"
                        class="fadeIn second"
                        name="no-hp"
                        placeholder="No Handphone"
                      />
                      <input
                        type="text"
                        id="jmlorg"
                        class="fadeIn second"
                        name="jmlorg"
                        placeholder="Jumlah Orang"
                      />
                      <input
                        type="text"
                        id="jadwal"
                        class="fadeIn second"
                        name="hari-tgl"
                        placeholder="Hari/Tanggal"
                      />
                      <input
                        type="text"
                        id="jam"
                        class="fadeIn second"
                        name="jam"
                        placeholder="Jam"
                      />
                      <input
                        type="text"
                        id="kegiatan"
                        class="fadeIn second"
                        name="kegiatan"
                        placeholder="Kegiatan"
                      />
                      <input type="submit" class="fadeIn fourth" value="Submit" />
                    </form>
                    <!-- add booking -->
                    <script>
                      const form = document.querySelector("form");
    
                      form.addEventListener("submit", async (event) => {
                        event.preventDefault();
    
                        const nama = document.getElementById("nama").value;
                        const nohp = document.getElementById("nohp").value;
                        const jumlahorang = document.getElementById("jmlorg").value;
                        const jadwal = document.getElementById("jadwal").value;
                        const kegiatan = document.getElementById("kegiatan").value;
                        const jam = document.getElementById("jam").value;
    
                        const data = {
                          nama,
                          nohp,
                          jumlahorang,
                          jadwal,
                          kegiatan,
                          jam,
                        };
    
                        const response = await fetch("http://localhost:8000/book", {
                          method: "POST",
                          headers: {
                            "Content-Type": "application/json",
                          },
                          body: JSON.stringify(data),
                        });
    
                        const result = await response.json();
    
                        if (result.success) {
                          alert("Terima Kasih, Booking berhasil!");
                          form.reset();
                          window.location.reload();
                        } else {
                          alert("Booking gagal!");
                          form.reset();
                        }
                      });
                    </script>
                  </div>
                </div>
              </div>
            </div>
          <thead class="thead">
            <tr class="tr-thead">
              <th class="th-name">NAMA</th>
              <th class="th-nohp">NOMOR HANDPHONE</th>
              <th class="th-org">JUMLAH ORANG</th>
              <th class="th-jam">JAM</th>
              <th class="th-tgl">HARI/TGL</th>
              <th class="th-kegiatan">KEGIATAN</th>
              <th class="th-action">ACTION</th>
            </tr>
          </thead>
          <tbody id="bookingoutput">
          </tbody>
          <script>
            // Select the HTML element where you want to display the data
            const bookingContainer =
              document.getElementById("bookingoutput");
            // Map the data from the response rows
            fetch("http://localhost:8000/booked")
              .then((response) => response.json())
              .then((data_booked) => {
                // Map the data from the response rows
                const bookedElements = data_booked.data.map(
                  (booked) => {
                    return `
                    <tr>
                    <td>${booked.nama}</td>
                    <td class="text-td">${booked.nohp}</td>
                    <td class="text-td">${booked.jumlahorang}</td>
                    <td class="text-td">${booked.jam}</td>
                    <td class="text-td">${booked.jadwal}</td>
                    <td class="text-td">${booked.kegiatan}</td>
                    <td>
                      <div class="button-container">
                        <button class="button-edit" onclick="openPopupForm('edit-booking')">Edit</button>
                        <button class="button-delete" onclick="openPopupForm('delete-booking')">Delete</button>
                      </div>
                    </td>
                    </tr>
                    `
                  }
                );
                bookingContainer.innerHTML = bookedElements.join("");
              });
          </script>
      </table>
      </div>

      <!-- table festival -->
      <div class="container-festival">
        <table>
            <div class="title-list">List of Festival</div>
            <div class="button-input">
              <button class="custom-btn button-22" onclick="openPopupForm('add-festival')">Tambah Festival</button>
            </div>
            <div id="popup-form-add-festival" class="popup-form">
              <div class="wrapper fadeInDown">
                <div id="formContent">
                  <!-- Icon -->
                  <div class="fadeIn first">
                    <img
                      src="./assets/images/logo/logowordmark.png"
                      id="icon"
                      alt="User Icon"
                      class="img-size"
                    />
                  </div>
                  <span class="close" onclick="closePopupForm('add-festival')">&times;</span>
                  <!-- Tabs Titles -->
                  <h5>Tambah Kegiatan Festival</h5>
                  <!-- Login Form -->
                  <form id="formfest">
                    <input
                      type="text"
                      id="nama-kegiatan-festival"
                      class="fadeIn second"
                      name="nama-kegiatan-festival"
                      placeholder="Nama Kegiatan"
                    />
                    <input
                      type="text"
                      id="deskripsi-festival"
                      class="fadeIn second"
                      name="deskripsi-festival"
                      placeholder="Deskripsi"
                    />
                    <input
                      type="text"
                      id="jadwal-festival"
                      class="fadeIn second"
                      name="jadwal-festival"
                      placeholder="Jadwal"
                    />
                    <input
                      type="text"
                      id="lokasi-festival"
                      class="fadeIn second"
                      name="lokasi-festival"
                      placeholder="Lokasi"
                    />
                    <input
                      type="text"
                      id="gmaps-festival"
                      class="fadeIn second"
                      name="gmaps-festival"
                      placeholder="Gmaps"
                    />
                    <!-- <label
                      class="fadeIn second sizelabelinput"
                      for="foto-festival"
                      >Unggah Foto Wisata</label
                    > -->
                    <!-- <input
                      type="file"
                      id="foto-festival"
                      class="fadeIn second"
                      name="foto-festival"
                    /> -->
                    <input
                      type="text"
                      id="foto-festival"
                      class="fadeIn second"
                      name="foto"
                      placeholder="Foto"
                    />
                    <input
                      type="submit"
                      class="fadeIn fourth"
                      value="Submit"
                    />
                  </form>
                  <script>
                    const formfest = document.querySelector("#formfest");
  
                    formfest.addEventListener("submit", async (event) => {
                      event.preventDefault();
  
                      const nama = document.getElementById("nama-kegiatan-festival").value;
                      const deskripsi = document.getElementById("deskripsi-festival").value;
                      const jadwal = document.getElementById("jadwal-festival").value;
                      const lokasi = document.getElementById("lokasi-festival").value;
                      const gmaps = document.getElementById("gmaps-festival").value;
                      const foto = document.getElementById("foto-festival").value;
                      const jenis = 'Festival';
  
                      const data = {
                        nama,
                        deskripsi,
                        jadwal,
                        lokasi,
                        gmaps,
                        foto,
                        jenis,
                      
                      };
  
                      const response = await fetch("http://localhost:8000/addfest", {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data),
                        log:console.log(data),
                        
                      });
  
                      const result = await response.json();
                      console.log(result);
  
                      if (result.success) {
                        alert("Terima Kasih, Booking berhasil!");
                        formfest.reset();
                        window.location.reload();
                      } else {
                        alert("Booking gagal!");
                        formfest.reset();
                      }
                    });
                  </script>
                </div>
              </div>
            </div>
          <thead class="thead">
            <tr class="tr-thead">
              <th class="th-namafestival">NAMA KEGIATAN</th>
              <th class="th-deskfestival">DESKRIPSI</th>
              <th class="th-jadwalfestival">JADWAL</th>
              <th class="th-lokasifestival">LOKASI</th>
              <th class="th-gmaps">GMAPS</th>
              <th class="th-fotofestival">FOTO</th>
              <th class="th-actionfestival">ACTION</th>
            </tr>
          </thead>
          <tbody id="festoutput">
            <script>
              // Select the HTML element where you want to display the data
              const dataContainer =
                document.getElementById("festoutput");
              // Map the data from the response rows
              fetch("http://localhost:8000/festival")
                .then((response) => response.json())
                .then((data_festival) => {
                  // Map the data from the response rows
                  const festivalElements = data_festival.rows.map(
                    (festival) => {
                      return `
                      <tr>
                        <td class="text-td">${festival.nama}</td>
                        <td class="text-td">${festival.deskripsi}</td>
                        <td class="text-td">${festival.jadwal}</td>
                        <td class="text-td">${festival.lokasi}</td>
                        <td class="text-td">${festival.gmaps}</td>
                        <td class="text-td">${festival.foto}</td>
                        <td>
                          <div class="button-container">
                        <button class="button-edit" onclick="openPopupForm('add-booking')">Edit</button>
                        <button class="button-delete" onclick="openPopupForm('add-booking')">Delete</button>
                        </div>  
                        </td>
                      </tr>
                            `;
                          }
                        );
                  dataContainer.innerHTML = festivalElements.join("");
                });
            </script>
          </tbody>
      </table>
      </div>


      <div class="container-pameran">
        <table>
            <div class="title-list">List of Pameran</div>
            <div class="button-input">
              <button class="custom-btn button-22" onclick="openPopupForm('add-pameran')">Tambah Pameran</button>
            </div>
            <div id="popup-form-add-pameran" class="popup-form">
              <div class="wrapper fadeInDown">
                <div id="formContent">
                  <!-- Icon -->
                  <div class="fadeIn first">
                    <img
                      src="./assets/images/logo/logowordmark.png"
                      id="icon"
                      alt="User Icon"
                      class="img-size"
                    />
                  </div>
                  <span class="close" onclick="closePopupForm('add-pameran')">&times;</span>
                  <!-- Tabs Titles -->
                  <h5>Tambah Kegiatan Pameran</h5>
                  <!-- Login Form -->
                  <form id="formpameran">
                    <input
                      type="text"
                      id="nama-kegiatan-pameran"
                      class="fadeIn second"
                      name="nama-kegiatan-pameran"
                      placeholder="Nama Kegiatan"
                    />
                    <input
                      type="text"
                      id="deskripsi-pameran"
                      class="fadeIn second"
                      name="deskripsi-pameran"
                      placeholder="Deskripsi"
                    />
                    <input
                      type="text"
                      id="jadwal-pameran"
                      class="fadeIn second"
                      name="jadwal-pameran"
                      placeholder="Jadwal"
                    />
                    <input
                      type="text"
                      id="lokasi-pameran"
                      class="fadeIn second"
                      name="lokasi-pameran"
                      placeholder="Lokasi"
                    />
                    <input
                      type="text"
                      id="gmaps-pameran"
                      class="fadeIn second"
                      name="gmaps-pameran"
                      placeholder="Gmaps"
                    />
                    <!-- <label
                      class="fadeIn second sizelabelinput"
                      for="foto-festival"
                      >Unggah Foto Wisata</label
                    > -->
                    <!-- <input
                      type="file"
                      id="foto-festival"
                      class="fadeIn second"
                      name="foto-festival"
                    /> -->
                    <input
                      type="text"
                      id="foto-pameran"
                      class="fadeIn second"
                      name="foto"
                      placeholder="Foto"
                    />
                    <input
                      type="submit"
                      class="fadeIn fourth"
                      value="Submit"
                    />
                  </form>
                  <script>
                    const formpameran = document.querySelector("#formpameran");
  
                    formpameran.addEventListener("submit", async (event) => {
                      event.preventDefault();
  
                      const nama = document.getElementById("nama-kegiatan-pameran").value;
                      const deskripsi = document.getElementById("deskripsi-pameran").value;
                      const jadwal = document.getElementById("jadwal-pameran").value;
                      const lokasi = document.getElementById("lokasi-pameran").value;
                      const gmaps = document.getElementById("gmaps-pameran").value;
                      const foto = document.getElementById("foto-pameran").value;
                      const jenis = 'Pameran';
  
                      const data = {
                        nama,
                        deskripsi,
                        jadwal,
                        lokasi,
                        gmaps,
                        foto,
                        jenis,
                      
                      };
  
                      const response = await fetch("http://localhost:8000/addpameran", {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data),
                        log:console.log(data),
                        
                      });
  
                      const result = await response.json();
                      console.log(result);
  
                      if (result.success) {
                        alert("Terima Kasih, Booking berhasil!");
                        formpameran.reset();
                        window.location.reload();
                      } else {
                        alert("Booking gagal!");
                        formpameran.reset();
                      }
                    });
                  </script>
                </div>
              </div>
            </div>
          <thead class="thead">
            <tr class="tr-thead">
              <th class="th-namafestival">NAMA KEGIATAN</th>
              <th class="th-deskfestival">DESKRIPSI</th>
              <th class="th-jadwalfestival">JADWAL</th>
              <th class="th-lokasifestival">LOKASI</th>
              <th class="th-gmaps">GMAPS</th>
              <th class="th-fotofestival">FOTO</th>
              <th class="th-actionfestival">ACTION</th>
            </tr>
          </thead>
          <tbody id="pameranOutput">
            <script>
              // Select the HTML element where you want to display the data
              const pameranContainer =
                document.getElementById("pameranOutput");
              // Map the data from the response rows
              fetch("http://localhost:8000/pameran")
                .then((response) => response.json())
                .then((data_pameran) => {
                  // Map the data from the response rows
                  const pameranElement = data_pameran.data.map(
                    (pameran) => {
                      return `
                    <tr>
              <td class="text-bold-500">${pameran.nama}</td>
              <td>${pameran.deskripsi}</td>
              <td class="text-td">${pameran.jadwal}</td>
              <td class="text-td">${pameran.lokasi}</td>
              <td class="text-td">${pameran.gmaps}</td>
              <td class="text-td">${pameran.foto}</td>
              <td>
                <div class="button-container">
                        <button class="button-edit" onclick="openPopupForm('add-booking')">Edit</button>
                        <button class="button-delete" onclick="openPopupForm('add-booking')">Delete</button>
                </div> 
              </td>
            </tr>
                      `;
                    }
                  );
                  pameranContainer.innerHTML =
                    pameranElement.join("");
                });
            </script>
          </tbody>
      </table>
      </div>
      

</body>

</html>